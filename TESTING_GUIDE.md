# 快速测试指南

## 测试前准备
确保应用已编译并在模拟器/真机上运行。

---

## 测试1：调试模式历史记录修复

### 步骤：
1. **开启调试模式**
   - 连续快速点击左上角金币图标 **5次**
   - 应该感到震动反馈，调试面板自动打开

2. **加载预设历史**
   - 在调试面板向下滚动到"历史数据预设"部分
   - 点击任意预设，例如"睡眠不足周期 (7天)"
   - 等待对话框关闭

3. **验证数据**
   - 点击顶部状态栏的 📊 图标打开健康历史
   - 选择"7天"标签
   - **预期结果**：应该看到 **7条不同日期** 的记录
   - 点击"查看详细数据"，确认每天都有数据
   - 向下滚动查看AI分析

### ✅ 通过标准：
- 显示7天完整数据（不是7条相同日期的记录）
- 每天的数据各不相同
- AI分析能够正常生成

---

## 测试2：UI简化效果

### 步骤：
1. **查看顶部状态栏**
   - 左侧：🪙 金币显示
   - 右侧：📊 历史、💬 聊天、⚙️ 设置、😊 角色图标

2. **验证按钮功能**
   - 点击 📊 → 打开健康历史
   - 点击 💬 → 打开聊天界面
   - 点击 ⚙️ → 打开设置
   - 点击 😊 → 打开角色选择

### ✅ 通过标准：
- 只有5个元素（比原来少1个）
- 金币数字完整显示（不换行）
- 布局整齐不拥挤
- 所有按钮功能正常

---

## 测试3：金币解锁系统

### 3.1 查看锁定状态
1. 点击右上角角色图标（😊）
2. 切换到"图片角色"模式
3. **预期**：看到4个图片角色，都显示 🔒 和价格

### 3.2 金币不足测试
1. 点击任意锁定角色（如"森林精灵·露娜" 1500金币）
2. **预期**：弹出"金币不足"提示
3. 点击"确定"关闭

### 3.3 设置金币并解锁
1. 关闭角色选择界面
2. 点击设置 ⚙️ → 调试控制台
3. 确保"启用调试模式"已开启
4. 向下滚动到"金币管理"
5. 点击"设为 1000"按钮
6. 返回主界面，确认左上角显示 🪙 1000
7. 再次打开角色选择
8. 点击"元气少女·小阳"（1000金币）
9. **预期**：弹出解锁确认对话框
   - 显示当前金币：1000
   - 显示所需金币：1000
10. 点击"确认解锁"
11. **预期**：显示"解锁成功"提示
12. 点击"确定"
13. **预期**：自动选中该角色（边框高亮）
14. 返回主界面
15. **预期**：左上角金币变为 🪙 0（1000-1000）

### 3.4 验证永久解锁
1. 再次打开角色选择
2. **预期**："元气少女·小阳"不再显示锁图标
3. 可以自由切换该角色

### 3.5 一键解锁所有（调试功能）
1. 进入设置 → 调试控制台
2. 向下滚动到"角色管理"
3. 点击"🔓 解锁所有图片角色"
4. 返回角色选择界面
5. **预期**：所有图片角色都已解锁（无锁图标）

### ✅ 通过标准：
- 金币不足时不能解锁
- 金币充足时成功解锁并扣除金币
- 解锁后角色永久可用
- 调试模式可以一键解锁所有
- 解锁状态在重启后保持

---

## 测试4：金币赚取机制

### 步骤：
1. **设置初始步数**
   - 打开调试面板
   - 在"步数调节"中设置为 5000步
   - **预期**：左上角金币显示 🪙 500

2. **增加步数**
   - 调整步数滑块到 10000步
   - **预期**：金币变为 🪙 1000

3. **快捷设置**
   - 点击"10K"快捷按钮
   - **预期**：立即设置为10000步，金币1000

### ✅ 通过标准：
- 金币 = 步数 ÷ 10
- 实时更新
- 保留手动设置的金币（在调试模式）

---

## 测试5：综合场景测试

### 场景：模拟用户完整使用流程

1. **初始状态**
   - 重置应用（如有必要）
   - 金币为0
   - 无解锁角色

2. **赚取金币**
   - 开启调试模式
   - 设置步数为 8000步
   - 金币变为 🪙 800

3. **尝试解锁便宜角色**
   - 打开角色选择
   - 解锁"智者·欧罗"（800金币）
   - 成功解锁，金币归零

4. **继续赚取**
   - 返回主界面
   - 设置步数为 15000步
   - 金币变为 🪙 1500

5. **解锁高级角色**
   - 解锁"森林精灵·露娜"（1500金币）
   - 成功解锁，金币归零

6. **验证历史记录**
   - 加载"完美一周"预设
   - 查看健康历史
   - 确认7天数据正确显示

### ✅ 通过标准：
- 完整流程无错误
- 金币计算正确
- 解锁系统运作正常
- 历史记录功能正常

---

## 常见问题排查

### Q1: 金币图标点击5次没反应
**解决**：
- 确保点击足够快（2秒内5次）
- 尝试关闭重开应用

### Q2: 解锁后金币没有扣除
**检查**：
- 确认解锁前后金币数量
- 可能是显示延迟，尝试返回主界面

### Q3: 历史记录还是只有一天
**检查**：
- 确保使用了更新后的代码
- 重新编译运行
- 尝试完全卸载重装

### Q4: 解锁状态不保存
**解决**：
- 检查UserDefaults权限
- 查看Xcode控制台错误信息

---

## 性能测试

### 内存占用
- 打开活动监视器
- 正常使用情况下 < 100MB
- 加载图片角色时适度增加

### 响应速度
- UI操作应该 < 100ms响应
- 解锁动画流畅
- 数据加载无明显卡顿

---

## 测试完成检查清单

- [ ] 调试模式可以正常开启
- [ ] 历史记录显示7天完整数据
- [ ] UI简化后布局正常
- [ ] 金币显示和计算正确
- [ ] 未解锁角色有锁定标识
- [ ] 金币不足时不能解锁
- [ ] 金币充足时成功解锁
- [ ] 解锁后扣除正确金币数
- [ ] 解锁状态永久保存
- [ ] 调试模式金币管理功能正常
- [ ] 调试模式一键解锁功能正常
- [ ] 所有按钮功能正常
- [ ] 无崩溃、无明显bug

---

## 答辩演示推荐测试顺序

1. **快速展示修复前的问题**（如果有旧版本）
2. **演示调试模式开启**（连点5次）
3. **加载历史预设** → 显示7天数据
4. **展示金币系统**：
   - 设置步数 → 获得金币
   - 尝试解锁 → 金币不足
   - 增加金币 → 成功解锁
5. **展示调试功能**：
   - 快速设置金币
   - 一键解锁所有角色
6. **总结优化效果**

预计演示时间：3-5分钟

---

完成所有测试后，应用就可以用于答辩演示了！🎉
