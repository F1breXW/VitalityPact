# 调试模式使用指南

## 如何进入调试模式

### 方法1：右上角调试按钮（推荐）✅

1. 打开应用后，点击顶部状态栏右侧的**扳手图标**🔧
2. 连续点击5次，你会看到数字从0/5变成1/5、2/5...
3. 第5次点击后，调试面板会自动打开

### 方法2：右下角调试按钮（备用）✅

1. 连续点击屏幕**右下角**5次
2. 调试面板会打开

---

## 调试面板功能

打开调试面板后，你可以：

### 🎛️ 演示模式控制
- **启用调试模式**：开启后可以使用手动调节功能
- **关闭调试模式**：返回使用真实的HealthKit数据

### 📊 数据调节
1. **步数调节**
   - 拖动滑杆：0-15,000步
   - 快捷按钮：0、2K、6K、10K步

2. **睡眠调节**
   - 拖动滑杆：0-12小时
   - 快捷按钮：3h、5h、7h、8h

3. **运动时长**
   - 拖动滑杆：0-120分钟
   - 快捷按钮：0min、15min、30min、60min

4. **心率调节**
   - 拖动滑杆：50-150 BPM

### 🎬 演示场景预设
点击按钮快速设置演示场景：

1. **场景1: 初次见面（虚弱）**
   - 步数：0
   - 睡眠：4小时
   - 运动：0分钟
   - 结果：角色虚弱，对话劝导

2. **场景2: 注入能量（健康）**
   - 步数：6000
   - 睡眠：7小时
   - 运动：20分钟
   - 结果：角色健康，状态良好

3. **场景3: 危机降临（步数够但缺觉）**
   - 步数：8000
   - 睡眠：3小时
   - 运动：30分钟
   - 结果：AI发现亚健康，情感化劝导

4. **场景4: 满状态（兴奋）**
   - 步数：10000
   - 睡眠：8小时
   - 运动：45分钟
   - 结果：角色兴奋，获得宝箱奖励

### 🔧 手动操作
- **刷新数据**：从HealthKit重新获取数据
- **生成新对话**：触发AI生成新的角色对话
- **触发宝箱动画**：演示宝箱奖励效果

---

## 演示流程（5-8分钟）

### 步骤1：初次见面（1分钟）
1. 进入应用，点击"跳过授权"
2. 观察虚弱的角色😵‍💫
3. AI台词："咳咳...你终于来了..."

### 步骤2：注入能量（2分钟）
1. 打开调试面板（右上角扳手图标，连续点击5次）
2. 启用"调试模式"
3. 调节步数到6000，观察角色变化
4. 背景变亮，角色变为😊
5. AI台词："哇！这股能量！"

### 步骤3：危机降临（2-3分钟）
1. 在调试面板将睡眠设置为3小时
2. 观察角色眼圈发黑，蹲下
3. AI实时生成劝导对话
4. 演示AI的情感化陪伴功能

### 步骤4：桌面陪伴（1分钟）
1. 退出应用到桌面
2. 展示Widget功能（如已配置）

### 步骤5：满状态演示（1分钟）
1. 在调试面板点击"场景4: 满状态"
2. 观察角色变为🤩，浑身发光
3. 宝箱动画🎁
4. AI台词："这股能量太强了！"

---

## 常见问题

### Q: 点击调试按钮没反应？
A: 请确保：
- 连续点击5次
- 在3秒内完成点击
- 点击的是扳手图标按钮

### Q: 调试面板是空的？
A: 请先启用"调试模式"开关

### Q: 看不到数据变化？
A: 调节数据后会自动更新，如未更新请点击"刷新数据"

### Q: 角色状态不变化？
A: 请检查：
- 步数、睡眠、运动数据是否合理
- 点击"生成新对话"手动触发

### Q: AI对话不更新？
A: 请检查：
- 网络连接是否正常
- 是否已配置API Key（可选）

---

## 技术要点

### 数据映射规则
- **步数 → 金币**：步数/10 = 金币数量
- **睡眠 → 防御力**：睡眠<6小时 = Debuff（防御减半）
- **运动 → 宝箱**：运动>30分钟 = 获得宝箱奖励
- **心率 → 攻击力**：影响角色基础攻击力

### 状态机逻辑
1. **疲劳状态**：睡眠<6小时（最高优先级）
2. **兴奋状态**：综合分数≥80
3. **健康状态**：综合分数≥40
4. **疲劳状态**：其他情况

### AI对话系统
- **本地模式**：使用预设对话模板（无需API）
- **云端模式**：调用DeepSeek/OpenAI/Moonshot API（需配置Key）
- **个性化**：根据健康数据动态生成对话内容

---

**祝演示顺利！** 🎉
